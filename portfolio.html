<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>이태윤 - Portfolio</title>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="nav">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">이태윤</a>
            <div class="nav-links">
                <a href="index.html" class="nav-link">이력서</a>
                <a href="portfolio.html" class="nav-link active">포트폴리오</a>
            </div>
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
                <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
            </button>
        </div>
    </nav>
    <div class="container">
        <header class="portfolio-header">
            <h1 class="portfolio-title">Portfolio</h1>
        </header>

        <!-- 일본 3PL 프로젝트 -->
        <section class="portfolio-item">
            <div class="portfolio-item-header">
                <div class="portfolio-item-title">
                    <h2>일본 3PL 시스템</h2>
                    <span class="portfolio-badge">STL</span>
                </div>
                <p class="portfolio-item-subtitle">일본 물류 센터 운영을 위한 3PL(Third Party Logistics) 시스템</p>
                <div class="portfolio-meta">
                    <span class="portfolio-period">2025.09 ~ 2025.11</span>
                </div>
            </div>
            <ul class="portfolio-highlights">
                <li>Redis Streams 기반 동시성 제어로 락 대기 시간 제거</li>
            </ul>
            <div class="portfolio-item-content">
                <div class="portfolio-section">
                    <h3>개요</h3>
                    <p>기존 분산락 방식은 락 대기 시간 발생 및 보상 트랜잭션 구현이 필요해 운영 복잡도가 높았음. 신규 시스템에서는 이를 개선한 동시성 제어 방식이 필요했음.</p>
                </div>
                <div class="portfolio-section">
                    <h3>역할</h3>
                    <p>일본 현지 물류 센터 운영을 위한 3PL 시스템 신규 구축. 주문 및 출고 도메인의 백엔드 설계부터 개발까지 담당하며, 동시성 제어 및 다국어 처리를 구현.</p>
                </div>
                <div class="portfolio-section">
                    <h3>담당 업무</h3>
                    <ul class="portfolio-tasks">
                        <li>일본 현지 물류 운영 프로세스 분석 및 요구사항 정의</li>
                        <li>주문 및 출고 도메인 백엔드 설계 및 개발</li>
                        <li>Redis Streams 기반 재고 차감 동시성 제어 구현</li>
                        <li>i18n 기반 다국어 처리 적용</li>
                    </ul>
                </div>
                <div class="portfolio-section">
                    <h3>주요 성과</h3>
                    <div class="portfolio-achievements">
                        <div class="achievement-card">
                            <h4>Redis Streams 기반 동시성 제어</h4>
                            <ul>
                                <li>이전 프로젝트에서 분산 락을 활용해 재고 정합성을 보장한 경험을 바탕으로, 락 대기 시간 증가와 보상 트랜잭션 복잡도에 따른 리스크를 인지</li>
                                <li>Redis Streams의 Consumer Group을 활용해 단일 Consumer 기반 순차 처리를 구현하고, 분산 락 없이 처리 순서를 보장</li>
                                <li>메시지 영속성과 Consumer Group을 활용해 보상 트랜잭션 없이 데이터 정합성 확보</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="portfolio-tech">
                    <span class="tag">Kotlin</span>
                    <span class="tag">SpringBoot</span>
                    <span class="tag">Redis Streams</span>
                    <span class="tag">MySQL</span>
                </div>
            </div>
        </section>

        <!-- 자사 정산 시스템 프로젝트 -->
        <section class="portfolio-item">
            <div class="portfolio-item-header">
                <div class="portfolio-item-title">
                    <h2>자사 정산 시스템</h2>
                    <span class="portfolio-badge">STL</span>
                </div>
                <p class="portfolio-item-subtitle">출고 데이터 기반 정산 프로세스 자동화 시스템</p>
                <div class="portfolio-meta">
                    <span class="portfolio-period">2025.11 ~ 2026.01</span>
                    <span class="portfolio-team">일 최대 20만 건, 월 최대 100만 건</span>
                </div>
            </div>
            <ul class="portfolio-highlights">
                <li>데이터 수집 성능 90% 개선 (30분 → 3분)</li>
                <li>정산 프로세스 완전 자동화</li>
            </ul>
            <div class="portfolio-item-content">
                <div class="portfolio-section">
                    <h3>개요</h3>
                    <p>기존 정산 프로세스가 수작업으로 진행되어 운영 부담이 컸으며, 외부 시스템에서 출고 데이터 수집 시 블로킹 I/O로 인해 5만 건 기준 30분이 소요되는 성능 문제 존재.</p>
                </div>
                <div class="portfolio-section">
                    <h3>역할</h3>
                    <p>대용량 출고 데이터를 기반으로 정산 프로세스를 자동화하는 시스템 개발. 외부 시스템에서 데이터를 수집하고 정산 처리하는 전체 파이프라인을 담당.</p>
                </div>
                <div class="portfolio-section">
                    <h3>담당 업무</h3>
                    <ul class="portfolio-tasks">
                        <li>대용량 출고 데이터 수집 스케줄러 개발</li>
                        <li>정산 시스템 안정화 및 프로세스 자동화</li>
                        <li>WebFlux 기반 비동기 처리 도입</li>
                    </ul>
                </div>
                <div class="portfolio-section">
                    <h3>주요 성과</h3>
                    <div class="portfolio-achievements">
                        <div class="achievement-card">
                            <h4>데이터 수집 성능 67% 개선</h4>
                            <ul>
                                <li>외부 API의 1회 호출당 99건 제한으로 5만 건 수집 시 500회 이상의 API 호출 필요</li>
                                <li>성능 개선 단계별 발전 과정:
                                    <ul>
                                        <li>1단계: 동기 순차 방식 - 블로킹 I/O로 30분 소요</li>
                                        <li>2단계: ExecutorService 멀티스레드 - 병렬 처리로 속도는 개선되었으나 스레드 생성/관리 오버헤드 존재</li>
                                        <li>3단계: WebFlux 비동기 병렬 - 논블로킹 I/O로 최종 10분 달성</li>
                                    </ul>
                                </li>
                                <li>flatMap concurrency 30으로 설정하여 외부 API 서버 부하를 고려하면서 병렬 처리 (테스트 기반 도출)</li>
                                <li>5만 건 기준 30분 → 10분으로 단축 (67% 개선)</li>
                            </ul>
                        </div>
                        <div class="achievement-card">
                            <h4>정산 프로세스 자동화</h4>
                            <ul>
                                <li>수작업 정산 프로세스 완전 자동화</li>
                                <li>JPA에서 JdbcTemplate Batch Insert로 전환하여 대량 저장 성능 개선</li>
                                <li>출고-비용 OneToMany 관계에서 PK 생성 시점 문제로 배치 처리 불가 → 고유 ID를 별도 생성하여 배치 저장 구현</li>
                                <li>일/월 단위 대용량 데이터 안정적 처리</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="portfolio-tech">
                    <span class="tag">Kotlin</span>
                    <span class="tag">SpringBoot</span>
                    <span class="tag">WebFlux</span>
                    <span class="tag">MySQL</span>
                </div>
            </div>
        </section>

        <!-- RDMS 프로젝트 -->
        <section class="portfolio-item">
            <div class="portfolio-item-header">
                <div class="portfolio-item-title">
                    <h2>RDMS</h2>
                    <span class="portfolio-badge">팀프레시</span>
                </div>
                <p class="portfolio-item-subtitle">B2B 유통·물류 통합 플랫폼</p>
                <div class="portfolio-meta">
                    <span class="portfolio-period">2023.12 ~ 2024.11 (11개월)</span>
                    <span class="portfolio-team">6명</span>
                </div>
            </div>
            <ul class="portfolio-highlights">
                <li>미오출률 1% 미만 개선</li>
                <li>센터 귀책비용 70% 감소</li>
                <li>동시성 이슈 해결로 데이터 정합성 확보</li>
            </ul>
            <div class="portfolio-item-content">
                <div class="portfolio-section">
                    <h3>개요</h3>
                    <p>멀티 인스턴스 환경에서 재고, 출고 등 공유 자원에 대한 동시 접근으로 중복 처리 및 데이터 불일치 문제 발생. 또한 서비스 클래스가 과도한 책임을 지고 외부 인프라에 강하게 결합되어 단위 테스트 작성이 어려운 상황.</p>
                </div>
                <div class="portfolio-section">
                    <h3>역할</h3>
                    <p>B2B 유통, 물류 통합 신규 서비스 출시를 위한 시스템 개발. 안정적인 서비스 제공을 위한 서버 아키텍처 설계부터 물류/배송 프로세스 개발, 아키텍처 전환 및 테스트 코드 도입까지 담당.</p>
                </div>
                <div class="portfolio-section">
                    <h3>담당 업무</h3>
                    <ul class="portfolio-tasks">
                        <li>신규 서비스 출시 - B2B 유통, 물류 통합 신규 서비스 출시</li>
                        <li>서버 아키텍처 설계 - 안정적인 서비스 제공을 위한 서버 설계</li>
                        <li>물류/배송 프로세스 개발 - 안정적인 물류, 배송 프로세스 개발 및 리팩토링</li>
                        <li>아키텍처 전환 - 유지보수성과 테스트 용이성을 높이고 개발 생산성 향상</li>
                        <li>Spring Batch 기반 통계 데이터 처리 - 실무자 및 운영팀의 수기 작업 자동화</li>
                    </ul>
                </div>
                <div class="portfolio-section">
                    <h3>주요 성과</h3>
                    <div class="portfolio-achievements">
                        <div class="achievement-card">
                            <h4>센터 운영 안정화</h4>
                            <ul>
                                <li>미오출률 1% 미만으로 개선</li>
                                <li>센터 귀책비용 70% 감소</li>
                            </ul>
                        </div>
                        <div class="achievement-card">
                            <h4>통계 데이터 자동화</h4>
                            <ul>
                                <li>일/월 단위 통계 제공으로 운영팀 공수 감소</li>
                            </ul>
                        </div>
                        <div class="achievement-card">
                            <h4>데이터 정합성 확보</h4>
                            <ul>
                                <li>동시성 이슈 해결을 통한 데이터 정합성 확보</li>
                                <li>수기 작업 감소 및 개발자 운영 리소스 감소</li>
                            </ul>
                        </div>
                        <div class="achievement-card">
                            <h4>아키텍처 전환</h4>
                            <ul>
                                <li>도메인 결합도 완화, 테스트 구조 개선</li>
                                <li>구조적 장점을 팀에 전파, 타 도메인 확산 기반 마련</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="portfolio-gallery">
                    <div class="gallery-item">
                        <img src="images/rdms-architecture.jpg" alt="RDMS 서버 아키텍처" loading="lazy">
                        <span class="gallery-caption">서버 아키텍처</span>
                    </div>
                    <div class="gallery-item">
                        <img src="images/rdms-process.png" alt="RDMS 물류/출고 프로세스" loading="lazy">
                        <span class="gallery-caption">물류/출고 프로세스</span>
                    </div>
                    <div class="gallery-item">
                        <img src="images/rdms-architecture-transition.png" alt="RDMS 아키텍처 전환" loading="lazy">
                        <span class="gallery-caption">기존 의존성 → 아키텍처 전환</span>
                    </div>
                </div>
                <div class="portfolio-tech">
                    <span class="tag">Java</span>
                    <span class="tag">SpringBoot</span>
                    <span class="tag">SpringBatch</span>
                    <span class="tag">MySQL</span>
                    <span class="tag">Redis</span>
                </div>
            </div>
        </section>

        <!-- 새벽시장 프로젝트 -->
        <section class="portfolio-item">
            <div class="portfolio-item-header">
                <div class="portfolio-item-title">
                    <h2>새벽시장</h2>
                    <span class="portfolio-badge">팀프레시</span>
                </div>
                <p class="portfolio-item-subtitle">B2C 식자재 유통 플랫폼</p>
                <div class="portfolio-meta">
                    <span class="portfolio-period">2023.05 ~ 2023.11 (6개월)</span>
                    <span class="portfolio-team">10명</span>
                </div>
            </div>
            <ul class="portfolio-highlights">
                <li>지연 프로젝트 3개월 내 안정적 오픈</li>
                <li>결제 시스템 모듈화 및 구조 개선</li>
            </ul>
            <div class="portfolio-item-content">
                <div class="portfolio-section">
                    <h3>개요</h3>
                    <p>일정 지연 상태였던 프로젝트에 중간 투입. 기존 결제 시스템이 결제 수단별로 분리되지 않아 유지보수와 기능 확장이 어려운 구조였음.</p>
                </div>
                <div class="portfolio-section">
                    <h3>역할</h3>
                    <p>B2C 식자재 유통 플랫폼 신규 시스템 개발. 개발 리드 및 백엔드 개발을 담당하여 신규 서비스 출시와 주문/결제 기능 리팩토링 및 PG 연동을 수행.</p>
                </div>
                <div class="portfolio-section">
                    <h3>담당 업무</h3>
                    <ul class="portfolio-tasks">
                        <li>신규 서비스 출시 - B2B 유통, 물류 통합 신규 서비스 출시</li>
                        <li>주문/결제 기능 리팩토링 및 PG 연동 - 안정적이고 확장 가능한 주문/결제 시스템 구현</li>
                    </ul>
                </div>
                <div class="portfolio-section">
                    <h3>주요 성과</h3>
                    <div class="portfolio-achievements">
                        <div class="achievement-card">
                            <h4>지연된 프로젝트 오픈</h4>
                            <ul>
                                <li>일정 지연 상태였던 프로젝트에 중간 투입되어 약 3개월 내 안정적 오픈 달성</li>
                                <li>백엔드, 앱, 프론트, 운영팀 등 내부 팀과의 커뮤니케이션과 일정 조율을 직접 리드</li>
                            </ul>
                        </div>
                        <div class="achievement-card">
                            <h4>결제 시스템 구조 개선</h4>
                            <ul>
                                <li>결제 수단별 API를 모듈화해 도메인 책임을 분리하고 기능 추가나 수정이 유연한 구조로 개선</li>
                                <li>자연키 기반 테이블을 대체키 기반으로 전환해 요구사항 확장에 유연하게 대응</li>
                                <li>PG 연동 로직을 직접 구현해 외부 결제 시스템과 안정적으로 연결</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="portfolio-tech">
                    <span class="tag">Kotlin</span>
                    <span class="tag">SpringBoot</span>
                    <span class="tag">MySQL</span>
                </div>
            </div>
        </section>

        <!-- 팀플레이스 프로젝트 -->
        <section class="portfolio-item">
            <div class="portfolio-item-header">
                <div class="portfolio-item-title">
                    <h2>팀플레이스</h2>
                    <span class="portfolio-badge">팀프레시</span>
                </div>
                <p class="portfolio-item-subtitle">B2B 유통 플랫폼</p>
                <div class="portfolio-meta">
                    <span class="portfolio-period">2022.10 ~ 2024.04 (1년 7개월)</span>
                    <span class="portfolio-team">1명 (단독)</span>
                </div>
            </div>
            <ul class="portfolio-highlights">
                <li>통계 생성 99.6% 개선 (20분 → 5초)</li>
                <li>주문 처리 성능 개선으로 수 배 트래픽 대응</li>
            </ul>
            <div class="portfolio-item-content">
                <div class="portfolio-section">
                    <h3>개요</h3>
                    <p>주문 집중 시간대에 MsSQL의 락 경합과 데드락이 발생하여 CPU/메모리 사용률 급증, 서비스 응답 지연 및 중단 장애가 반복되는 상황. 또한 통계 데이터 생성에 20분이 소요되어 운영팀의 업무 효율이 저하됨.</p>
                </div>
                <div class="portfolio-section">
                    <h3>역할</h3>
                    <p>기존 B2B 유통 플랫폼의 개발 및 운영. 백엔드와 프론트엔드 개발 및 운영을 단독으로 담당하며 통계 조회 및 다운로드 개선, 주문 기능 성능 개선, 전반적인 프로덕트 성능 개선을 수행.</p>
                </div>
                <div class="portfolio-section">
                    <h3>담당 업무</h3>
                    <ul class="portfolio-tasks">
                        <li>통계 조회 및 다운로드 개선 - 통계 조회 및 엑셀 다운로드 기능 리팩토링, 월별 통계 데이터 생성 기능을 20분에서 5초로 리팩토링</li>
                        <li>주문 기능 성능 개선 - 특정 시간대 주문 폭주 문제 해결, 일 주문 금액 및 건수 2배까지 성능 이슈 없도록 개선</li>
                        <li>프로덕트 성능 개선 - 코드 리팩토링 및 쿼리 튜닝으로 전체적인 서비스 성능 향상</li>
                    </ul>
                </div>
                <div class="portfolio-section">
                    <h3>주요 성과</h3>
                    <div class="portfolio-achievements">
                        <div class="achievement-card">
                            <h4>통계/지표 성능 개선 및 자동화</h4>
                            <ul>
                                <li>월별 통계 생성 속도를 20분 → 5초로 단축하여 운영팀 업무 효율을 향상</li>
                            </ul>
                        </div>
                        <div class="achievement-card">
                            <h4>매출단가 예약 기능 개발</h4>
                            <ul>
                                <li>예약 단가 설정 기능을 새로 도입하여 수기 설정 부담 및 휴먼 에러로 인한 매출 손실을 방지</li>
                            </ul>
                        </div>
                        <div class="achievement-card">
                            <h4>주문 처리 성능 개선</h4>
                            <ul>
                                <li>주문 처리 병목을 제거하는 리팩토링을 통해, 기존 대비 수 배 수준의 주문 증가 상황에서도 안정적으로 처리 가능하도록 개선</li>
                            </ul>
                        </div>
                        <div class="achievement-card">
                            <h4>서비스 전반 성능 개선</h4>
                            <ul>
                                <li>코드 최적화 및 쿼리 튜닝을 통해 전체 프로덕트의 응답성과 안정성 향상</li>
                                <li>고객사 이탈 방지 및 만족도 개선에 기여</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="portfolio-tech">
                    <span class="tag">Java</span>
                    <span class="tag">Jsp</span>
                    <span class="tag">MsSql</span>
                    <span class="tag">Redis</span>
                </div>
            </div>
        </section>

        <!-- 건강비밀 프로젝트 -->
        <section class="portfolio-item">
            <div class="portfolio-item-header">
                <div class="portfolio-item-title">
                    <h2>건강비밀</h2>
                    <span class="portfolio-badge">와이즈셀렉션</span>
                </div>
                <p class="portfolio-item-subtitle">개인 맞춤 영양제 추천 플랫폼</p>
                <div class="portfolio-meta">
                    <span class="portfolio-period">2021.09 ~ 2022.09 (1년)</span>
                    <span class="portfolio-team">4명</span>
                </div>
            </div>
            <ul class="portfolio-highlights">
                <li>자가진단 응답 98% 개선 (60초 → 1초 이내)</li>
                <li>Kafka 기반 CDC 파이프라인 구축</li>
            </ul>
            <div class="portfolio-item-content">
                <div class="portfolio-section">
                    <h3>개요</h3>
                    <p>MSA 환경에서 서비스 간 통신이 모두 동기 방식으로 구현되어 응답 지연 이슈 발생. 협업사 DB 수작업 수정에 따른 운영 리스크 존재. 또한 자가진단 결과 제공에 최대 60초가 소요되어 사용자 이탈 발생.</p>
                </div>
                <div class="portfolio-section">
                    <h3>역할</h3>
                    <p>개인 맞춤형 영양제 자가진단 서비스 개발 및 운영. 백엔드와 프론트엔드 개발 및 운영을 담당하며 리워드 서비스 개발, 자가진단 서비스 성능 향상, 협업 데이터 인프라 구축을 수행.</p>
                </div>
                <div class="portfolio-section">
                    <h3>담당 업무</h3>
                    <ul class="portfolio-tasks">
                        <li>리워드 서비스 개발 - 신규 서비스 런칭을 통한 리텐션 및 재구매율 증가</li>
                        <li>자가진단 서비스 성능 향상 - 고객 경험 개선을 위한 자가진단 서비스 성능 개선</li>
                        <li>협업 데이터 인프라 구축 - 협업 데이터 실시간 처리 기반 마련</li>
                    </ul>
                </div>
                <div class="portfolio-section">
                    <h3>주요 성과</h3>
                    <div class="portfolio-achievements">
                        <div class="achievement-card">
                            <h4>유지보수 및 성능 개선</h4>
                            <ul>
                                <li>통계 페이지 시각화 개선을 통해 운영팀의 데이터 분석 효율 향상</li>
                                <li>쿠폰 및 마일리지 지급 기능을 안정화하여 프로모션 운영 리스크 완화</li>
                                <li>쿼리 튜닝을 통해 지표 집계 및 알고리즘 처리 속도 개선</li>
                            </ul>
                        </div>
                        <div class="achievement-card">
                            <h4>Kafka 기반 비동기 통신 인프라 및 CDC 인프라 구축</h4>
                            <ul>
                                <li>기존 MSA 환경에서 동기 통신으로 처리되던 서비스 흐름을 Kafka를 통해 비동기로 처리</li>
                                <li>Kafka 기반 CDC 파이프라인을 통해 공통 데이터를 단일 발행하고, 협업사별로 독립 처리할 수 있는 유연한 연동 구조를 구현</li>
                            </ul>
                        </div>
                        <div class="achievement-card">
                            <h4>자가진단 서비스 성능 개선</h4>
                            <ul>
                                <li>쿼리 리팩토링 및 서비스 로직 리팩토링을 통해 기존 60초가 소요되던 자가진단 결과 제공 시간을 1초 이내로 단축</li>
                                <li>사용자 체감 속도를 크게 개선하고, 서비스 만족도를 높임</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="portfolio-gallery">
                    <div class="gallery-item gallery-item-wide">
                        <img src="images/vimeal-kafka.jpeg" alt="건강비밀 Kafka CDC 파이프라인" loading="lazy">
                        <span class="gallery-caption">Kafka CDC 파이프라인</span>
                    </div>
                </div>
                <div class="portfolio-tech">
                    <span class="tag">Java</span>
                    <span class="tag">SpringBoot</span>
                    <span class="tag">VueJs</span>
                    <span class="tag">MySQL</span>
                    <span class="tag">Kafka</span>
                    <span class="tag">ELK</span>
                </div>
            </div>
        </section>

        <footer class="footer">
            <p>Last Updated: 2026.01</p>
        </footer>
    </div>

    <!-- Lightbox -->
    <div class="lightbox" id="lightbox">
        <button class="lightbox-close" id="lightboxClose" aria-label="Close">&times;</button>
        <img class="lightbox-img" id="lightboxImg" src="" alt="">
        <span class="lightbox-caption" id="lightboxCaption"></span>
    </div>

    <script>
        const themeToggle = document.getElementById('themeToggle');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');

        function setTheme(isDark) {
            document.documentElement.setAttribute('data-theme', isDark ? 'dark' : 'light');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        }

        // Initialize theme
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            setTheme(savedTheme === 'dark');
        } else {
            setTheme(prefersDark.matches);
        }

        // Toggle theme on button click
        themeToggle.addEventListener('click', () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            setTheme(currentTheme !== 'dark');
        });

        // Listen for system theme changes
        prefersDark.addEventListener('change', (e) => {
            if (!localStorage.getItem('theme')) {
                setTheme(e.matches);
            }
        });

        // Lightbox functionality
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightboxImg');
        const lightboxCaption = document.getElementById('lightboxCaption');
        const lightboxClose = document.getElementById('lightboxClose');

        document.querySelectorAll('.gallery-item img').forEach(img => {
            img.addEventListener('click', () => {
                lightbox.classList.add('active');
                lightboxImg.src = img.src;
                lightboxCaption.textContent = img.alt;
                document.body.style.overflow = 'hidden';
            });
        });

        function closeLightbox() {
            lightbox.classList.remove('active');
            document.body.style.overflow = '';
        }

        lightboxClose.addEventListener('click', closeLightbox);
        lightbox.addEventListener('click', (e) => {
            if (e.target === lightbox) closeLightbox();
        });
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeLightbox();
        });
    </script>
</body>
</html>